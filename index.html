<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;500;700&display=swap">
    <link rel="stylesheet" href="./base-styles.css">
    <link rel="stylesheet" href="./components/btn.css">
    <link rel="stylesheet" href="./components/nav-bar.css">
    <link rel="stylesheet" href="./components/products.css">
    <link rel="shortcut icon" href="./assets/logos/favicon_yard_sale.svg" type="image/x-icon">
    <title>Yard Sale</title>
</head>
<body>
    <nav class="nav-bar">
        <button type="button" class="nav-bar__menu btn" onclick="">
            <img src="./assets/icons/icon_menu.svg" alt="menu">
        </button>
        
        <div class="nav-bar__section-logo-categories">
            <a class="nav-bar__link" href="/index.html">
                <img class="nav-bar__logo" src="./assets/logos/logo_yard_sale.svg" alt="Yard Sale">
            </a>
            
            <form class="nav-bar__categories">
                <label class="nav-bar__category-label">
                    <input type="radio" class="nav-bar__category-option" name="category" id="cat-all" checked>
                    <span>All</span>
                </label>

                <label class="nav-bar__category-label">
                    <input type="radio" class="nav-bar__category-option" name="category" id="cat-clothes">
                    <span>Clothes</span>
                </label>
                
                <label class="nav-bar__category-label">
                    <input type="radio" class="nav-bar__category-option" name="category" id="cat-electro">
                    <span>Electronics</span>
                </label>

                <label class="nav-bar__category-label">
                    <input type="radio" class="nav-bar__category-option" name="category" id="cat-furniture">
                    <span>Furniture</span>
                </label>
                
                <label class="nav-bar__category-label">
                    <input type="radio" class="nav-bar__category-option" name="category" id="cat-toys">
                    <span>Toys</span>
                </label>

                <label class="nav-bar__category-label">
                    <input type="radio" class="nav-bar__category-option" name="category" id="cat-others">
                    <span>Others</span>
                </label>
            </form>
        </div>

        <div class="nav-bar__section-email-cart">
            <p class="nav-bar__email">example@email.com</p>
            <button type="button" class="nav-bar__email-btn btn">
                <img src="./assets/icons/arrow.svg" alt=">">
            </button>

            <button type="button" class="nav-bar__cart-btn btn">
                <img class="nav-bar__cart-icon" src="./assets/icons/icon_shopping_cart.svg" alt="Cart ðŸ›’">
            </button>
        </div>

    </nav>

    <div class="container">
        <main class="products-grid"></main>

        <template id="product-card">
            <article class="product-card">
                <figure>
                    <img class="product-card__image" src="" alt="product cover">
                </figure>
                <div class="product-card__info">
                    <div>
                        <p class="product-card__title"></p>
                        <p class="product-card__price"></p>
                    </div>
                    
                    <button type="button" class="btn product-card__cart-button" title="">
                        <img class="product-card__cart-button-icon" src="" alt="cart icon">
                    </button>
                </div>
            </article>
        </template>
    </div>

    <script>
        const productList = [
            {
                title: 'Audio cassette',
                price: 50,
                coverSrc: './assets/product-covers/audio-cassette.jpg',
                inCart: false,
            },
            {
                title: 'Brownsville NY electric guitar - Black and white original',
                price: 700,
                coverSrc: './assets/product-covers/electric-guitar.jpg',
                inCart: true,
            },
            {
                title: 'Pentax camera - Black and grey',
                price: 900,
                coverSrc: './assets/product-covers/camera.jpg',
                inCart: false,
            },
            {
                title: 'Wireless PC mouse Logitech',
                price: 350,
                coverSrc: './assets/product-covers/pc-mouse.jpg',
                inCart: false,
            },
            {
                title: 'Rolex wrist watch',
                price: 1200,
                coverSrc: './assets/product-covers/wrist-watch.jpg',
                inCart: true,
            },
            {
                title: 'Brown wooden chair',
                price: 100,
                coverSrc: './assets/product-covers/chair.jpg',
                inCart: false,
            },
        ];
        const productCards = [];
        const main = document.querySelector('main.products-grid');
        
        const setEllipsis = (element, text) => {
            if(text.length > 45) {
                element.setAttribute('title', text);
                element.innerText = text.substring(0,41) + '...';
            }
            else {
                element.innerText = text;
            }
        };

        const fetchProducts = () => {
            for (const product of productList) {
                const card = document.getElementById('product-card').content.cloneNode(true);
                
                setEllipsis(card.querySelector('.product-card__title'), product.title);
                card.querySelector('.product-card__price').innerText = '$' + product.price;
                card.querySelector('.product-card__image').setAttribute('src', product.coverSrc);
                card.querySelector('.product-card__cart-button').setAttribute('title',
                    product.inCart ? 'Added to cart' : 'Add to cart');
                card.querySelector('.product-card__cart-button-icon').setAttribute('src',
                    product.inCart ? './assets/icons/bt_added_to_cart.svg' : './assets/icons/bt_add_to_cart.svg');
                
                product.inCart && card.querySelector('.product-card').setAttribute('in-cart', true);

                productCards.push(card);
            }
    
            for (const card of productCards) {
                main.appendChild(card);
            }
        };

        fetchProducts();
    </script>
</body>
</html>